<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [MSEide-MSEgui-talk] Closing a form post data to database
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mseide-msegui-talk/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:mseide-msegui-talk%40lists.berlios.de?Subject=Re%3A%20%5BMSEide-MSEgui-talk%5D%20Closing%20a%20form%20post%20data%20to%20database&In-Reply-To=%3CCADCB-gZuLi1ug8UdDw5q0vfZxmabHDBgt1G6cGWkQNpmX_n-1Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004085.html">
   <LINK REL="Next"  HREF="004087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[MSEide-MSEgui-talk] Closing a form post data to database</H1>
    <B>Julio Jim&#233;nez</B> 
    <A HREF="mailto:mseide-msegui-talk%40lists.berlios.de?Subject=Re%3A%20%5BMSEide-MSEgui-talk%5D%20Closing%20a%20form%20post%20data%20to%20database&In-Reply-To=%3CCADCB-gZuLi1ug8UdDw5q0vfZxmabHDBgt1G6cGWkQNpmX_n-1Q%40mail.gmail.com%3E"
       TITLE="[MSEide-MSEgui-talk] Closing a form post data to database">jujibo at gmail.com
       </A><BR>
    <I>Thu Aug 18 20:14:51 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004085.html">[MSEide-MSEgui-talk] borderless form again
</A></li>
        <LI>Next message: <A HREF="004087.html">[MSEide-MSEgui-talk] Closing a form post data to database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4086">[ date ]</a>
              <a href="thread.html#4086">[ thread ]</a>
              <a href="subject.html#4086">[ subject ]</a>
              <a href="author.html#4086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I open a form with a tdbnavigator and tdbwidgetgrid. There is a button with
modalresult set to mr_ok (just to close the form)

Curious.. If I'm editing and close the form, the database is updated with
the changes and I check in onClose ds.state is dsBrowse
The same happens if I press the button (form is closed and ds.state is
dsBrowse)

Then I check inside the button (onexecute) and here... ds.state is dsEdit
but again.. when the form is closed due the button pressed.. it changes
again to dsBrowse and changes are saved to the database.

I have detected it because I used a check in form.onclose to check if the
user was inserting or editing data giving a warning and allowing to cancel
the form close.

I also discovered if I remove the tdbnavigator all is working as expected...
weird.

IIRC this was working in the past.

Did something changed that I missed?


fpc 2.4.4  + linux 32 bits.  mseide trunk


Thanks



Julio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mseide-msegui-talk/attachments/20110818/570d96bf/attachment.html">https://lists.berlios.de/pipermail/mseide-msegui-talk/attachments/20110818/570d96bf/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004085.html">[MSEide-MSEgui-talk] borderless form again
</A></li>
	<LI>Next message: <A HREF="004087.html">[MSEide-MSEgui-talk] Closing a form post data to database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4086">[ date ]</a>
              <a href="thread.html#4086">[ thread ]</a>
              <a href="subject.html#4086">[ subject ]</a>
              <a href="author.html#4086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mseide-msegui-talk">More information about the MSEide-MSEgui-talk
mailing list</a><br>
</body></html>
